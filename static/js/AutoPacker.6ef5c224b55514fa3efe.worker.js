!function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,h=new Array(t);i<t;i++)h[i]=e[i];return h}function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,i){if(t){if("string"===typeof t)return e(t,i);var h=Object.prototype.toString.call(t).slice(8,-1);return"Object"===h&&t.constructor&&(h=t.constructor.name),"Map"===h||"Set"===h?Array.from(t):"Arguments"===h||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?e(t,i):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var i;!function(e){e[e.DO_PLACING=0]="DO_PLACING",e[e.DEC_WIDTH=1]="DEC_WIDTH",e[e.INC_HEIGHT=2]="INC_HEIGHT",e[e.STOP=3]="STOP"}(i||(i={}));var h,r,s=function(){function e(e,t,i,h){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===h&&(h=0),this.x=e,this.y=t,this.width=i,this.height=h}return e.IsContainedIn=function(e,t){return e.x>=t.x&&e.y>=t.y&&e.x+e.width<=t.x+t.width&&e.y+e.height<=t.y+t.height},e}();!function(e){e[e.RectBestAreaFit=0]="RectBestAreaFit",e[e.RectBestShortSideFit=1]="RectBestShortSideFit",e[e.RectBestLongSideFit=2]="RectBestLongSideFit",e[e.RectWorstAreaFit=3]="RectWorstAreaFit",e[e.RectWorstShortSideFit=4]="RectWorstShortSideFit",e[e.RectWorstLongSideFit=5]="RectWorstLongSideFit"}(h||(h={})),function(e){e[e.SplitShorterLeftoverAxis=0]="SplitShorterLeftoverAxis",e[e.SplitLongerLeftoverAxis=1]="SplitLongerLeftoverAxis",e[e.SplitMinimizeArea=2]="SplitMinimizeArea",e[e.SplitMaximizeArea=3]="SplitMaximizeArea",e[e.SplitShorterAxis=4]="SplitShorterAxis",e[e.SplitLongerAxis=5]="SplitLongerAxis"}(r||(r={}));var n=function(){function e(e,t,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=!1),this.binWidth=e,this.binHeight=t,this.allowFlip=i,this.usedRectangles=[],this.freeRectangles=[],this.binWidth&&this.binHeight&&this.freeRectangles.push(new s(0,0,this.binWidth,this.binHeight))}return e.prototype.InsertSizes=function(e,t,i,h){for(var r,n=0,a=0,c=!1;e.length>0;){for(var o=Number.MAX_VALUE,g=0;g<this.freeRectangles.length;++g)for(var l=0;l<e.length;++l){if(e[l].width===this.freeRectangles[g].width&&e[l].height===this.freeRectangles[g].height){n=g,a=l,c=!1,o=Number.MIN_VALUE,g=this.freeRectangles.length;break}if(this.allowFlip&&e[l].height===this.freeRectangles[g].width&&e[l].width===this.freeRectangles[g].height){n=g,a=l,c=!0,o=Number.MIN_VALUE,g=this.freeRectangles.length;break}if(e[l].width<=this.freeRectangles[g].width&&e[l].height<=this.freeRectangles[g].height)(f=this.ScoreByHeuristic(e[l].width,e[l].height,this.freeRectangles[g],i))<o&&(n=g,a=l,c=!1,o=f);else if(this.allowFlip&&e[l].height<=this.freeRectangles[g].width&&e[l].width<=this.freeRectangles[g].height){var f;(f=this.ScoreByHeuristic(e[l].height,e[l].width,this.freeRectangles[g],i))<o&&(n=g,a=l,c=!0,o=f)}}if(o===Number.MAX_VALUE)return;var d=e.splice(a,1)[0];d.x=this.freeRectangles[n].x,d.y=this.freeRectangles[n].y;var u=new s(this.freeRectangles[n].x,this.freeRectangles[n].y,d.width,d.height);c&&(r=[u.height,u.width],u.width=r[0],u.height=r[1]),this.SplitFreeRectByHeuristic(this.freeRectangles[n],u,h),this.freeRectangles.splice(n,1),t&&this.MergeFreeList(),this.usedRectangles.push(d)}},e.prototype.Fits=function(e,t){return e.width<=t.width&&e.height<=t.height||e.height<=t.width&&e.width<=t.height},e.prototype.FitsPerfectly=function(e,t){return e.width===t.width&&e.height===t.height||e.height===t.width&&e.width===t.height},e.prototype.Occupancy=function(){for(var e=0,t=0;t<this.usedRectangles.length;++t)e+=this.usedRectangles[t].width*this.usedRectangles[t].height;return e/(this.binWidth*this.binHeight)},e.prototype.ScoreByHeuristic=function(e,t,i,r){switch(r){case h.RectBestAreaFit:return this.ScoreBestAreaFit(e,t,i);case h.RectBestShortSideFit:return this.ScoreBestShortSideFit(e,t,i);case h.RectBestLongSideFit:return this.ScoreBestLongSideFit(e,t,i);case h.RectWorstAreaFit:return this.ScoreWorstAreaFit(e,t,i);case h.RectWorstShortSideFit:return this.ScoreWorstShortSideFit(e,t,i);case h.RectWorstLongSideFit:return this.ScoreWorstLongSideFit(e,t,i);default:return Number.MAX_VALUE}},e.prototype.ScoreBestAreaFit=function(e,t,i){return i.width*i.height-e*t},e.prototype.ScoreBestShortSideFit=function(e,t,i){var h=Math.abs(i.width-e),r=Math.abs(i.height-t);return Math.min(h,r)},e.prototype.ScoreBestLongSideFit=function(e,t,i){var h=Math.abs(i.width-e),r=Math.abs(i.height-t);return Math.max(h,r)},e.prototype.ScoreWorstAreaFit=function(e,t,i){return-this.ScoreBestAreaFit(e,t,i)},e.prototype.ScoreWorstShortSideFit=function(e,t,i){return-this.ScoreBestShortSideFit(e,t,i)},e.prototype.ScoreWorstLongSideFit=function(e,t,i){return-this.ScoreBestLongSideFit(e,t,i)},e.prototype.FindPositionForNewNode=function(e,t,i,h){for(var r=new s,n=Number.MAX_VALUE,a=0;a<this.freeRectangles.length;++a){if(e===this.freeRectangles[a].width&&t===this.freeRectangles[a].height){r.x=this.freeRectangles[a].x,r.y=this.freeRectangles[a].y,r.width=e,r.height=t,n=Number.MIN_VALUE,h.value=a;break}if(t===this.freeRectangles[a].width&&e===this.freeRectangles[a].height){r.x=this.freeRectangles[a].x,r.y=this.freeRectangles[a].y,r.width=t,r.height=e,n=Number.MIN_VALUE,h.value=a;break}if(e<=this.freeRectangles[a].width&&t<=this.freeRectangles[a].height)(c=this.ScoreByHeuristic(e,t,this.freeRectangles[a],i))<n&&(r.x=this.freeRectangles[a].x,r.y=this.freeRectangles[a].y,r.width=e,r.height=t,n=c,h.value=a);else if(t<=this.freeRectangles[a].width&&e<=this.freeRectangles[a].height){var c;(c=this.ScoreByHeuristic(t,e,this.freeRectangles[a],i))<n&&(r.x=this.freeRectangles[a].x,r.y=this.freeRectangles[a].y,r.width=t,r.height=e,n=c,h.value=a)}}return r},e.prototype.SplitFreeRectByHeuristic=function(e,t,i){var h,s=e.width-t.width,n=e.height-t.height;switch(i){case r.SplitShorterLeftoverAxis:h=s<=n;break;case r.SplitLongerLeftoverAxis:h=s>n;break;case r.SplitMinimizeArea:h=t.width*n>s*t.height;break;case r.SplitMaximizeArea:h=t.width*n<=s*t.height;break;case r.SplitShorterAxis:h=e.width<=e.height;break;case r.SplitLongerAxis:h=e.width>e.height;break;default:h=!0}this.SplitFreeRectAlongAxis(e,t,h)},e.prototype.SplitFreeRectAlongAxis=function(e,t,i){var h=new s(e.x,e.y+t.height,0,e.height-t.height),r=new s(e.x+t.width,e.y,e.width-t.width,0);i?(h.width=e.width,r.height=t.height):(h.width=t.width,r.height=e.height),h.width>0&&h.height>0&&this.freeRectangles.push(h),r.width>0&&r.height>0&&this.freeRectangles.push(r)},e.prototype.MergeFreeList=function(){for(var e=0;e<this.freeRectangles.length;++e)for(var t=e+1;t<this.freeRectangles.length;++t)this.freeRectangles[e].width===this.freeRectangles[t].width&&this.freeRectangles[e].x===this.freeRectangles[t].x?this.freeRectangles[e].y===this.freeRectangles[t].y+this.freeRectangles[t].height?(this.freeRectangles[e].y-=this.freeRectangles[t].height,this.freeRectangles[e].height+=this.freeRectangles[t].height,this.freeRectangles.splice(t,1),--t):this.freeRectangles[e].y+this.freeRectangles[e].height===this.freeRectangles[t].y&&(this.freeRectangles[e].height+=this.freeRectangles[t].height,this.freeRectangles.splice(t,1),--t):this.freeRectangles[e].height===this.freeRectangles[t].height&&this.freeRectangles[e].y===this.freeRectangles[t].y&&(this.freeRectangles[e].x===this.freeRectangles[t].x+this.freeRectangles[t].width?(this.freeRectangles[e].x-=this.freeRectangles[t].width,this.freeRectangles[e].width+=this.freeRectangles[t].width,this.freeRectangles.splice(t,1),--t):this.freeRectangles[e].x+this.freeRectangles[e].width===this.freeRectangles[t].x&&(this.freeRectangles[e].width+=this.freeRectangles[t].width,this.freeRectangles.splice(t,1),--t))},e.FreeRectChoiceHeuristic=h,e.GuillotineSplitHeuristic=r,e}();function a(e){for(var i=function(e){var t=e.map((function(e){return e.width})),i=e.map((function(e){return e.height}));return{minWidth:Math.min.apply(null,t),minHeight:Math.min.apply(null,i),maxWidth:t.reduce((function(e,t){return e+t}),0),maxHeight:i.reduce((function(e,t){return e+t}),0)}}(e),h=Math.max(i.minWidth,i.minHeight),r=Math.max(i.maxWidth,i.maxHeight),s=1,a=[];s;){var c=h+Math.ceil((r-h)/2),o=new n(c,c);o.InsertSizes(t(e),!0,1,1),r-h<2?s=0:e.length>o.usedRectangles.length?h+=Math.ceil((r-h)/2):(a=o.usedRectangles,r-=Math.floor((r-h)/2))}return a}var c=self;c.addEventListener("message",(function(e){var t=e.data;if(t.length>1){var i=a(t);c.postMessage(i)}else c.postMessage(t||[])}),!1)}();
//# sourceMappingURL=AutoPacker.6ef5c224b55514fa3efe.worker.js.map