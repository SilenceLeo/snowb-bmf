---
title: 布局设置
description: 配置位图字体的布局，包括间距、内边距和对齐选项，以生成最佳的纹理图集。
---

布局设置控制在生成位图字体时，单个字形在纹理图集中的排列方式。这些参数直接影响位图字体的最终输出质量、文件大小和运行时性能。

## 概述

布局配置决定了字形在纹理图集中的空间组织。关键设置包括：

- **内边距 (Padding)**：在每个字形周围添加额外空间，以防止出现颜色溢出等渲染瑕疵。
- **间距 (Spacing)**：定义纹理图集中相邻字形之间的空隙，以实现高效打包。
- **页 (Pages)**：生成的纹理图集图像数量，由系统自动管理。

## 内边距 (Padding)

**默认值**：1 像素

内边距在纹理图集中为每个字形添加一个透明边框。这对于防止视觉瑕疵至关重要，尤其是在字体被缩放或过滤时。

### 主要优点
- **防止溢出 (Prevents Bleeding)**：防止相邻字形的颜色在纹理采样时混合。
- **改善缩放 (Improves Scaling)**：确保字体在放大或缩小时的清晰渲染。
- **支持过滤 (Supports Filtering)**：为双线性或三线性纹理过滤提供必要的缓冲。

### 推荐
- **标准 (Standard)**：对于大多数情况，1-2 像素已足够。
- **高分屏/Retina (High-DPI/Retina)**：使用 2-4 像素以获得清晰的渲染效果。
- **大量缩放 (Heavy Scaling)**：如果您计划大幅度缩放字体，请增加内边距。
- **内存 (Memory)**：请注意，较高的内边距值会增加最终的纹理大小。

### 示例
```
内边距 = 0: 字形可能会相互溢出。
内边距 = 1: 适用于大多数项目的标准安全边距。
内边距 = 2: 为高质量渲染提供额外缓冲。
```

## 间距 (Spacing)

**默认值**：1 像素

间距定义了纹理图集中相邻字形边界框之间的空隙。它有助于优化打包算法。

### 用途
- **打包效率 (Packing Efficiency)**：一致的间距有助于打包算法更有效地排列字形。
- **调试 (Debugging)**：使在图集中更容易地目视识别单个字形。

### 间距 vs. 内边距

内边距和间距共同作用以分隔字形：
- **内边距** 是字形自身分配空间的一部分。
- **间距** 是两个字形已分配空间*之间*的空隙。
- **总分隔距离** = (字形1的内边距) + 间距 + (字形2的内边距)

### 推荐设置
- **标准 (Standard)**：对于大多数字体，1-2 像素效果很好。
- **紧密打包 (Dense Packing)**：使用 0-1 像素以最小化纹理图集大小，但要注意瑕疵。
- **调试 (Debugging)**：使用较大的值（例如 4-8 像素）以清晰地看到字形边界。

## 分页 (Pages)

**默认值**：1 页

决定生成的纹理图集图像的数量。如果所有字形无法容纳在单个纹理上，它们将自动分布到多个页面。

### 何时使用多页？
- **大型字符集 (Large Character Sets)**：对于包含数千个字形的字体（例如，完整的 CJK 支持）。
- **纹理大小限制 (Texture Size Limits)**：为了保持在硬件限制内（例如，4096x4096 像素）。

系统会自动管理页面的创建，以最大化纹理空间利用率，同时尝试将相关的字形放在一起。

### 注意事项
- **性能 (Performance)**：在渲染过程中，每个额外的页面都可能引入少量性能成本（纹理切换）。
- **单页 (Single Page)**：大多数基于拉丁字母的字符集将适合单个 512x512 或 1024x1024 的纹理。

## 对导出文件的影响

布局设置直接影响导出的字体文件（例如 `.fnt`）中的数据。

- **内边距 (Padding)**：内边距值通常直接写入字体描述符文件（例如，BMFont 格式中 `info` 块的 `padding` 属性）。
- **间距 (Spacing)**：影响图集中每个字符的 x/y 位置和偏移量。
- **页 (Pages)**：决定描述符中引用的纹理文件数量。

## 最佳实践

### 通用
1.  **从默认值开始 (Start with Defaults)**：使用 1px 内边距和 1px 间距，然后根据需要进行调整。
2.  **在目标尺寸下测试 (Test at Target Size)**：始终检查字体在其最终预期渲染尺寸下的外观。
3.  **为缩放做计划 (Plan for Scaling)**：如果字体将在运行时缩放，请使用稍多的内边距。
4.  **监控纹理大小 (Monitor Texture Size)**：在视觉质量和内存限制之间取得平衡。

### 平台特定
- **桌面 (Desktop)**：2px 内边距，1px 间距是一个很好的起点。
- **移动端 (Mobile)**：1px 内边距，1px 间距以节省内存。
- **高分屏 (High-DPI)**：考虑将内边距增加到 2px 或更多以获得更清晰的效果。

## 故障排除

- **字形溢出/瑕疵 (Glyph Bleeding/Artifacts)**：增加 **内边距 (Padding)**。
- **纹理图集过大 (Texture Atlas Too Large)**：减小字体大小、减少字符集或允许更多 **页 (Pages)**。
- **字形打包效率低下 (Inefficient Glyph Packing)**：调整 **间距 (Spacing)**。
- **大量字形渲染缓慢 (Slow Rendering with Many Glyphs)**：这可能是由于 **页 (Pages)** 过多。如果可能，尝试将字形放入更少的纹理中。